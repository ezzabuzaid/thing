model Client {
  id       String    @id @default(uuid(7)) @db.Uuid
  name     String    @db.VarChar(160)
  projects Project[]

  // References
  userId String

  // Audit field
  updatedAt DateTime @updatedAt

  // Constraints
  @@unique([userId, name])
  @@index([userId])
}

model Project {
  id      String      @id @default(uuid(7)) @db.Uuid
  client  Client      @relation(fields: [clientId], references: [id], onDelete: Cascade)
  name    String      @db.VarChar(160)
  entries HourEntry[]

  // References
  clientId String @db.Uuid
  userId   String

  // Audit field
  updatedAt DateTime @updatedAt

  // Constraints
  @@unique([clientId, name])
  @@index([clientId])
  @@index([userId])
}

model HourEntry {
  id         String   @id @default(uuid(7)) @db.Uuid
  project    Project  @relation(fields: [projectId], references: [id], onDelete: Restrict)
  date       DateTime
  hours      String
  billable   Boolean  @default(true)
  note       String?  @db.Text
  currency   String?  @default("USD")
  hourlyRate String

  // References
  projectId String @db.Uuid
  userId    String

  // Audit field
  updatedAt DateTime @updatedAt

  // Constraints
  @@unique([projectId, date, note], map: "uniq_entry_hint")
  @@index([userId])
}
